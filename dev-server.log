
> 10ta@0.1.0 dev /Users/medelman/GitHub/medelman17/10ta
> next dev

   ▲ Next.js 15.4.2
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.127:3000
   - Environments: .env.local, .env
   - Experiments (use with caution):
     · clientTraceMetadata

 ✓ Starting...
 ○ Compiling /instrumentation ...
 ✓ Compiled /instrumentation in 1394ms (1043 modules)
 ✓ Ready in 3.3s
 ✓ Compiled /middleware in 463ms (824 modules)
(node:43303) [DEP0060] DeprecationWarning: The `util._extend` API is deprecated. Please use Object.assign() instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
 ○ Compiling /api/issues ...
 ✓ Compiled /api/issues in 2.3s (2236 modules)
=== Issue Creation API Called ===
User found: cmdgi97x90000ci9344a1igt0 (mike.edelman@gmail.com)
FormData received. Keys: [
  'title',
  'description',
  'category',
  'severity',
  'location',
  'isPublic',
  'unitId',
  'buildingId',
  'photos'
]
Extracted form fields: {
  title: 'Structural issue in Interior wall or support column',
  description: 'Visible crack in wall/column covered by cardboard and tape. The crack appears to be covered with a makeshift repair using purple and yellow tape holding cardboard in place, suggesting an attempt to hide or temporarily patch a structural issue.',
  category: 'structural',
  severity: 'medium',
  location: 'kitchen',
  isPublic: false,
  unitId: 'cmdi8p0la0005ci5dpja4nlig',
  buildingId: 'sample-building-1'
}
Creating issue with data: {
  title: 'Structural issue in Interior wall or support column',
  description: 'Visible crack in wall/column covered by cardboard and tape. The crack appears to be covered with a makeshift repair using purple and yellow tape holding cardboard in place, suggesting an attempt to hide or temporarily patch a structural issue.',
  category: 'structural',
  severity: 'MEDIUM',
  location: 'kitchen',
  isPublic: false,
  reporterId: 'cmdgi97x90000ci9344a1igt0',
  unitId: 'cmdi8p0la0005ci5dpja4nlig',
  buildingId: 'sample-building-1',
  mediaCount: 1
}
User cmdgi97x90000ci9344a1igt0 created issue cmdj59bdk0001ciev6apaz9t9 in building sample-building-1
 POST /api/issues 200 in 4908ms
 ○ Compiling /dashboard/issues/my ...
 ✓ Compiled /dashboard/issues/my in 3s (4166 modules)
 GET /dashboard/issues/my 200 in 3596ms
 GET /api/issues?scope=my 200 in 472ms
 GET /api/issues?scope=my 200 in 340ms
 ⚠ Found a change in next.config.ts. Restarting the server to apply the changes...
   ▲ Next.js 15.4.2
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.127:3000
   - Environments: .env.local, .env
   - Experiments (use with caution):
     · clientTraceMetadata

 ✓ Starting...
 ○ Compiling /instrumentation ...
 ✓ Compiled /instrumentation in 1700ms (1043 modules)
 ✓ Ready in 3.5s
 ○ Compiling /middleware ...
 ✓ Compiled /middleware in 748ms (824 modules)
(node:59698) [DEP0060] DeprecationWarning: The `util._extend` API is deprecated. Please use Object.assign() instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
 ○ Compiling /dashboard/issues/my ...
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (154kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (139kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (138kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (158kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
 ✓ Compiled /dashboard/issues/my in 7.1s (4073 modules)
 GET /dashboard/issues/my 200 in 9003ms
 ○ Compiling /api/auth/sync ...
 ✓ Compiled /api/auth/sync in 1670ms (3153 modules)
 ✓ Compiled in 540ms (908 modules)
 GET /favicon.ico 200 in 2912ms
 GET /api/auth/sync 200 in 2842ms
 GET /dashboard/issues/my 200 in 466ms
 GET /api/issues?scope=my 200 in 3289ms
 ○ Compiling /dashboard/issues/[id] ...
 ✓ Compiled /dashboard/issues/[id] in 666ms (4193 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 2086ms
 GET /api/auth/sync 200 in 42ms
 GET /dashboard/issues/my 200 in 203ms
 GET /api/issues?scope=my 200 in 407ms
 GET /api/issues?scope=my 200 in 326ms
 ○ Compiling /dashboard/issues/building ...
 ✓ Compiled /dashboard/issues/building in 1062ms (4191 modules)
 GET /dashboard/issues/building 200 in 1824ms
 GET /api/issues?scope=building 307 in 260ms
 ✓ Compiled /api/auth/sync in 481ms (3298 modules)
 GET /api/auth/sync 200 in 1135ms
User cmdgi97x90000ci9344a1igt0 accessed building issues for sample-building-1 (canViewAll: true)
 GET /api/issues?scope=building&buildingId=sample-building-1 200 in 1458ms
 ○ Compiling /dashboard ...
 ✓ Compiled /dashboard in 1223ms (4198 modules)
 GET /dashboard 200 in 1907ms
 GET /api/auth/sync 200 in 47ms
 ✓ Compiled in 197ms (910 modules)
 GET /dashboard 200 in 269ms
 GET /dashboard/issues/building 200 in 246ms
 GET /api/issues?scope=building 307 in 252ms
 GET /api/auth/sync 200 in 89ms
User cmdgi97x90000ci9344a1igt0 accessed building issues for sample-building-1 (canViewAll: true)
 GET /api/issues?scope=building&buildingId=sample-building-1 200 in 404ms
 ✓ Compiled in 166ms (910 modules)
 GET /dashboard/issues/building 200 in 453ms
 ⚠ Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 GET /dashboard/issues/building 200 in 649ms
 ✓ Compiled in 1773ms (5022 modules)
 GET /dashboard/issues/building 200 in 1510ms
 ○ Compiling /favicon.ico ...
 ✓ Compiled /favicon.ico in 723ms (3304 modules)
 GET /favicon.ico 200 in 1299ms
 GET /api/auth/sync 200 in 988ms
 GET /api/issues?scope=building 307 in 1795ms
User cmdgi97x90000ci9344a1igt0 accessed building issues for sample-building-1 (canViewAll: true)
 GET /api/issues?scope=building&buildingId=sample-building-1 200 in 578ms
 ✓ Compiled in 756ms (4214 modules)
 GET /dashboard/issues/building 200 in 265ms
 ✓ Compiled in 760ms (4214 modules)
 GET /dashboard/issues/building 200 in 224ms
 ✓ Compiled in 628ms (4214 modules)
 GET /dashboard/issues/building 200 in 208ms
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (154kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (139kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (138kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (158kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
 GET /dashboard/issues/my 200 in 439ms
 GET /api/auth/sync 200 in 62ms
 GET /api/issues?scope=my 200 in 404ms
 ○ Compiling /dashboard/issues/new ...
 ✓ Compiled /dashboard/issues/new in 790ms (4224 modules)
 GET /dashboard/issues/new 200 in 1195ms
 ○ Compiling /api/admin/units ...
 ✓ Compiled /api/admin/units in 1143ms (4226 modules)
 GET /api/auth/sync 200 in 1025ms
 GET /api/admin/units?buildingId=sample-building-1 200 in 1438ms
 ✓ Compiled in 838ms (4231 modules)
 GET /dashboard/issues/new 200 in 239ms
 GET /api/admin/units?buildingId=sample-building-1 200 in 234ms
 ✓ Compiled in 796ms (4245 modules)
 GET /dashboard/issues/new 200 in 238ms
 GET /api/admin/units?buildingId=sample-building-1 200 in 198ms
 GET /dashboard/issues/my 200 in 295ms
 GET /api/auth/sync 200 in 64ms
 GET /api/issues?scope=my 200 in 375ms
 GET /dashboard/issues/building 200 in 204ms
 GET /api/issues?scope=building 307 in 205ms
 GET /api/auth/sync 200 in 38ms
User cmdgi97x90000ci9344a1igt0 accessed building issues for sample-building-1 (canViewAll: true)
 GET /api/issues?scope=building&buildingId=sample-building-1 200 in 597ms
 ✓ Compiled in 753ms (4247 modules)
 GET /dashboard/issues/building 200 in 204ms
 ○ Compiling /dashboard/issues ...
 ✓ Compiled /dashboard/issues in 794ms (4239 modules)
 GET /dashboard/issues 200 in 1230ms
 GET /dashboard/issues/my 200 in 184ms
 GET /api/auth/sync 200 in 62ms
 GET /api/issues?scope=my 200 in 400ms
 GET /dashboard/issues/new 200 in 226ms
 GET /api/admin/units?buildingId=sample-building-1 200 in 218ms
 GET /api/auth/sync 200 in 41ms
 ✓ Compiled in 725ms (4253 modules)
 GET /dashboard/issues/new 200 in 201ms
 GET /api/admin/units?buildingId=sample-building-1 200 in 202ms
 ✓ Compiled in 885ms (4253 modules)
 GET /dashboard/issues/new 200 in 217ms
 GET /api/admin/units?buildingId=sample-building-1 200 in 209ms
 GET /dashboard 200 in 1523ms
 GET /api/auth/sync 200 in 74ms
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 603ms
 ✓ Compiled in 2.2s (4119 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 531ms
 ✓ Compiled in 676ms (4119 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 414ms
 ✓ Compiled in 1045ms (4119 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 398ms
 GET /dashboard/issues/new 200 in 193ms
 ○ Compiling /api/admin/units ...
 ✓ Compiled /api/admin/units in 1468ms (3204 modules)
 GET /api/admin/units?buildingId=sample-building-1 200 in 1852ms
 GET /api/admin/units?buildingId=sample-building-1 200 in 194ms
 GET /dashboard 200 in 617ms
 ○ Compiling /api/auth/sync ...
 ✓ Compiled /api/auth/sync in 1209ms (3206 modules)
 GET /api/auth/sync 200 in 1401ms
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 444ms
 ○ Compiling /dashboard/communications/new ...
 ✓ Compiled /dashboard/communications/new in 1779ms (4902 modules)
 GET /dashboard/communications/new?issueId=cmdj59bdk0001ciev6apaz9t9 200 in 2080ms
 ✓ Compiled in 211ms (1316 modules)
 GET /dashboard/communications/new?issueId=cmdj59bdk0001ciev6apaz9t9 200 in 228ms
 ✓ Compiled in 841ms (4906 modules)
 GET /dashboard/communications/new?issueId=cmdj59bdk0001ciev6apaz9t9 200 in 251ms
 ✓ Compiled in 809ms (4906 modules)
 GET /dashboard/communications/new?issueId=cmdj59bdk0001ciev6apaz9t9 200 in 599ms
 ✓ Compiled in 730ms (4899 modules)
 GET /dashboard/communications/new?issueId=cmdj59bdk0001ciev6apaz9t9 200 in 293ms
 ✓ Compiled in 634ms (4899 modules)
 GET /dashboard/communications/new?issueId=cmdj59bdk0001ciev6apaz9t9 200 in 240ms
 ✓ Compiled in 1107ms (4828 modules)
 ⚠ Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 GET /dashboard/communications/new?issueId=cmdj59bdk0001ciev6apaz9t9 200 in 622ms
 GET /dashboard/communications/new?issueId=cmdj59bdk0001ciev6apaz9t9 200 in 425ms
 ○ Compiling /api/auth/sync ...
 ✓ Compiled /api/auth/sync in 508ms (3526 modules)
 ✓ Compiled (3530 modules)
 GET /favicon.ico 200 in 1041ms
 GET /api/auth/sync 200 in 802ms
 ○ Compiling /dashboard/issues/my ...
 ✓ Compiled /dashboard/issues/my in 624ms (3535 modules)
 GET /dashboard/issues/my 200 in 1154ms
 ○ Compiling /api/issues ...
 ✓ Compiled /api/issues in 713ms (3654 modules)
 GET /api/auth/sync 200 in 1535ms
 GET /api/issues?scope=my 200 in 2119ms
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 512ms
 GET /api/auth/sync 200 in 38ms
 ○ Compiling /dashboard/analytics ...
 ✓ Compiled /dashboard/analytics in 3.5s (5897 modules)
 GET /dashboard/analytics 200 in 4154ms
 ○ Compiling /api/auth/sync ...
 ✓ Compiled /api/auth/sync in 1514ms (5912 modules)
 GET /api/auth/sync 200 in 1508ms
 GET /api/issues/statistics?timeRange=30d 400 in 1874ms
 GET /api/issues/heatmap?timeRange=30d 400 in 2285ms
 GET /api/issues/heatmap?timeRange=30d 400 in 246ms
 ○ Compiling /dashboard/admin/units ...
 ✓ Compiled /dashboard/admin/units in 1431ms (5944 modules)
 GET /dashboard/admin/units 200 in 2128ms
 GET /api/auth/sync 200 in 50ms
 ○ Compiling /api/admin/units ...
 ✓ Compiled /api/admin/units in 966ms (4082 modules)
 POST /api/admin/units 201 in 1482ms
 GET /dashboard/admin/units 200 in 286ms
 POST /api/admin/units 201 in 259ms
 GET /dashboard/admin/units 200 in 262ms
 POST /api/admin/units 201 in 272ms
 GET /dashboard/admin/units 200 in 285ms
 GET /dashboard/issues/my 200 in 499ms
 ○ Compiling /api/issues ...
 ✓ Compiled /api/auth/sync in 1235ms (4191 modules)
 ✓ Compiled (4193 modules)
 GET /api/auth/sync 200 in 1430ms
 GET /api/issues?scope=my 200 in 2477ms
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 570ms
 GET /api/auth/sync 200 in 45ms
 ✓ Compiled in 1790ms (5936 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 392ms
 ✓ Compiled in 235ms (1864 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 422ms
 ✓ Compiled in 2s (5929 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 434ms
 ✓ Compiled in 1236ms (5935 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ○ Compiling /api/auth/sync ...
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 961ms
 ✓ Compiled /api/auth/sync in 792ms (4074 modules)
 ○ Compiling /favicon.ico ...
 ✓ Compiled /favicon.ico in 921ms (4076 modules)
 GET /favicon.ico 200 in 1529ms
 GET /api/auth/sync 200 in 1133ms
 GET /dashboard/communications/new?issueId=cmdj59bdk0001ciev6apaz9t9 200 in 217ms
 ✓ Compiled in 827ms (5942 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 367ms
 ○ Compiling /api/issues/[id] ...
 ✓ Compiled /api/issues/[id] in 2.4s (5929 modules)
Error updating issue: Error [PrismaClientValidationError]: 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    userId: "cmdgi97x90000ci9344a1igt0",
    action: "UPDATE_ISSUE",
    entityType: "Issue",
    metadata: {
      changes: {
        status: "CLOSED"
      },
      updatedBy: "reporter"
    },
+   entityId: String
  }
}

Argument `entityId` is missing.
    at async PATCH$1 (webpack-internal:/(rsc)/app/api/issues/[id]/app/api/issues/[id]/route.ts:149:4)
  147 |
  148 |     // Log the update
> 149 |     await prisma.auditLog.create({
      |    ^
  150 |       data: {
  151 |         userId: user.id,
  152 |         action: 'UPDATE_ISSUE', {
  clientVersion: '6.12.0'
}
 PATCH /api/issues/cmdj59bdk0001ciev6apaz9t9 500 in 4256ms
 ○ Compiling /dashboard ...
 ✓ Compiled /dashboard in 1014ms (4082 modules)
 GET /dashboard 200 in 1887ms
 ○ Compiling /api/auth/sync ...
 ✓ Compiled /api/auth/sync in 564ms (4084 modules)
 GET /api/auth/sync 200 in 721ms
 GET /dashboard/issues/my 200 in 497ms
 ○ Compiling /api/issues ...
 ✓ Compiled /api/issues in 1155ms (4200 modules)
 GET /api/auth/sync 200 in 1669ms
 GET /api/issues?scope=my 200 in 2617ms
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 503ms
 GET /api/auth/sync 200 in 39ms
 ✓ Compiled in 2.8s (5674 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 447ms
 ✓ Compiled in 881ms (5548 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 494ms
 ✓ Compiled in 1483ms (5548 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 411ms
 ✓ Compiled in 1120ms (5548 modules)
 GET /dashboard/issues/cmdj59bdk0001ciev6apaz9t9 200 in 349ms
 GET /dashboard/issues/my 200 in 43ms
 ○ Compiling /api/issues ...
 ✓ Compiled /api/issues in 549ms (3804 modules)
 GET /api/issues?scope=my 200 in 1079ms
 GET /api/issues?scope=my 200 in 350ms
